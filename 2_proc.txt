create proc pro_add_category(@id nvarchar(50), @nameCategory nvarchar(255), @nameSupplier nvarchar(255), @status bit)
as
begin
	insert into dbo.tblCategory(Id, NameCategory,NameSupplier,Status)
	values(@id,@nameCategory,@nameSupplier,@status)
end

go

create proc proc_update_category(@id nvarchar(50), @nameCategory nvarchar(255), @nameSupplier nvarchar(255), @status bit)
as
begin
	update dbo.tblCategory set NameCategory = @nameCategory,
	NameSupplier = @nameSupplier, Status = @status
	where Id = @id
end

go create proc proc_view_product
as
begin
	select p.*, c.NameCategory from tblProduct p 
	join tblCategory c on c.Id = p.IdCategory
	order by p.createdDate DESC
end

go

create proc proc_add_product(@id nvarchar(50), @idCategory nvarchar(50),@nameProduct nvarchar(255), @color nvarchar(255), @size nvarchar(100),
@price float, @quantity int, @description nvarchar(2000), @createdDate datetime)
as
begin
	insert into tblProduct(Id, IdCategory, NameProduct, Color, Size, Price, Quantity, Description, createdDate)
	values(@id, @idCategory, @nameProduct, @color, @size, @price, @quantity, @description, @createdDate)
end

go

create proc proc_update_product(@id nvarchar(50), @idCategory nvarchar(50),@nameProduct nvarchar(255), 
@color nvarchar(255), @size nvarchar(100),
@price float, @quantity int, @description nvarchar(2000))
as
begin
	update tblProduct set IdCategory = @idCategory,
					NameProduct = @nameProduct,
					Color = @color,
					Size = @size,
					Quantity = @quantity,
					Description = @description
	where Id = @id
end


go

create proc proc_view_detal_bill(@id nvarchar(50))
as
begin
	select ind.Id, ind.Quantity,ind.TotalMoney, p.NameProduct, p.Color,p.Size, p.Price, b.NameCustomer,b.CreateDate
	from tblInvoiceDetails ind 
	Join tblBill b on b.Id = ind.IdBill
	Join tblProduct p on p.Id = ind.idProduct
	where b.Id = @id;
end


go 

create proc proc_add_ReceiptSlip(@id nvarchar(50), @nameCustomer nvarchar(255), @address nvarchar(255),
@receivingTime datetime, @recevier nvarchar(255), @payTime datetime, @flag bit)
as
begin
	if(@flag=1)--insert
		begin
			insert into tblReceiptSlip(Id,NameCustomer, Address, ReceivingTime, Receiver, PayTime)
			values(@id, @nameCustomer, @address, @receivingTime, @recevier, @payTime)
		end
	else
		begin
			update tblReceiptSlip set NameCustomer = @nameCustomer,
				Address = @address,
				ReceivingTime = @receivingTime,
				Receiver = @recevier,
				PayTime = @payTime
				where Id = @id
		end

end

go

create proc proc_save_or_update_EquipmentNeedWarrayty(@id nvarchar(50), @nameProduct nvarchar(255),
@status nvarchar(255), @description nvarchar(255), @flag bit)
as
begin
	if(@flag = 1)
		begin
			insert into tblEquipmentNeedWarrayty(Id, NameProduct, Status, Description)
			values (@id, @nameProduct, @status, @description)
		end
	else
		begin
			update tblEquipmentNeedWarrayty set NameProduct = @nameProduct,
				Status = @status,
				Description = @description
				where Id = @id
		end
end